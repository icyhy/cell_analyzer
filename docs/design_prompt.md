# Web应用设计提示：交互式细胞图像分析平台

## 1. 项目概述

### 1.1 项目目标
设计并开发一个专为生物研究人员打造的、基于Web的、用户友好的图像处理与分析工具。该工具旨在简化双光子荧光标记的细胞或神经元图像的分析流程，实现高效的细胞识别、计数和密度分析。

### 1.2 核心价值
- **高效性**: 自动化细胞识别与计数，取代传统的手动方法，大幅提升研究效率。
- **易用性**: 提供直观的图形用户界面（GUI），无需专业的编程或图像处理背景即可轻松上手。
- **准确性**: 集成先进的图像识别算法（如Cellpose），确保分析结果的准确性和可重复性。
- **交互性**: 支持用户通过交互式操作（如绘制ROI）进行深度数据挖掘。

## 2. 目标用户
- **神经科学家**: 研究神经元形态、分布和连接的研究人员。
- **细胞生物学家**: 分析细胞培养物、组织切片中细胞数量和空间分布的科研工作者。
- **药理学家**: 在药物筛选过程中，评估药物对细胞数量或形态影响的研究人员。

## 3. 功能需求与用户故事

### 3.1 文件上传与管理 (User Story 1)
- **As a** 研究员,
- **I want to** 能够轻松上传`.tif`或`.tiff`格式的荧光图像文件，
- **So that** 我可以开始我的图像分析工作。

**功能细分:**
- **3.1.1 图像上传**:
  - 支持拖拽上传和点击选择文件上传。
  - 支持单文件和多文件批量上传。
  - 上传时显示清晰的进度条。
  - 对不支持的文件格式（非`.tif`/`.tiff`）进行友好提示。
- **3.1.2 文件列表**:
  - 上传后的文件应以列表或缩略图形式展示。
  - 显示文件名、上传日期、文件大小等基本信息。
  - 提供删除或重新分析已上传文件的选项。

### 3.2 图像查看与导航 (User Story 2)
- **As a** 研究员,
- **I want to** 查看高分辨率的图像，并且如果图像是Z-Stack（多层堆叠），我需要一个滑动条来逐帧浏览,
- **So that** 我可以全面地检查我的样本。

**功能细分:**
- **3.2.1 图像渲染**:
  - 在主界面清晰、高保真地渲染`.tif`图像。
  - 提供缩放（Zoom In/Out）和平移（Pan）功能，方便查看图像细节。
- **3.2.2 Z-Stack导航**:
  - 自动检测图像是否为多帧堆叠（Stack）。
  - 如果是Stack，界面自动显示一个水平或垂直的滑动条。
  - 拖动滑动条可以流畅地在不同帧（Z平面）之间切换，并实时显示当前帧的编号。
- **3.2.3 图像调节**:
  - （可选高级功能）提供亮度、对比度的调节选项。

### 3.3 自动化细胞识别与可视化 (User Story 3)
- **As a** 研究员,
- **I want to** 点击一个按钮就能自动识别图像中的所有细胞或神经元，并清晰地在图上标记出来,
- **So that** 我可以快速获得初步的分析结果。

**功能细分:**
- **3.3.1 一键分析**:
  - 提供一个醒目的“开始分析”或“识别细胞”按钮。
  - 后端调用`Cellpose`或类似的成熟算法库进行计算。
  - 分析过程中显示加载动画或进度提示，避免用户焦虑。
- **3.3.2 结果可视化**:
  - 识别完成后，在原始图像上用半透明的彩色轮廓或圆圈精确地圈出每一个被识别的细胞。
  - 标记的轮廓应清晰可见，但不能完全遮挡原始图像细节。
  - 用户可以点击某个轮廓，高亮显示该细胞。
- **3.3.3 结果统计**:
  - 在界面侧边栏或下方的数据面板中，实时显示识别出的细胞总数。

### 3.4 区域兴趣（ROI）分析 (User Story 4)
- **As a** 研究员,
- **I want to** 在图像的特定区域手动绘制一个“感兴趣区域”（ROI），并立即计算出这个区域内的细胞密度,
- **So that** 我可以对样本的特定部分进行更精细的定量分析。

**功能细分:**
- **3.4.1 ROI绘制工具**:
  - 提供简单易用的绘图工具，如圆形、矩形、多边形工具。
  - 用户可以在图像上自由绘制一个或多个ROI。
  - 绘制的ROI边界清晰，并可进行编辑（调整大小、移动位置）或删除。
- **3.4.2 ROI内部密度计算**:
  - ROI绘制或编辑完成后，系统自动计算并显示以下信息：
    - **ROI内的细胞数量**: 统计有多少个被识别的细胞（或其中心点）落入ROI边界内。
    - **ROI的面积**: 以像素或微米为单位（如可能，需预先设定比例尺）。
    - **细胞密度**: `细胞数量 / 面积`，并显示单位。
- **3.4.3 多个ROI管理**:
  - 支持在同一张图上绘制多个ROI，每个ROI都有独立的编号和分析结果。

### 3.5 数据导出 (User Story 5)
- **As a** 研究员,
- **I want to** 将分析结果（包括细胞总数、ROI分析数据和带标记的图像）导出,
- **So that** 我可以在我的报告、论文或演示文稿中使用这些数据。

**功能细-分:**
- **3.5.1 数据导出**:
  - 提供“导出数据”按钮。
  - 支持将统计数据（总数、ROI列表、密度等）导出为`.csv`或`.xlsx`格式。
- **3.5.2 图像导出**:
  - 支持将带有识别标记和ROI的当前视图导出为`.png`或`.jpeg`格式的图像。

## 4. UI/UX与原型设计要求

### 4.1 布局设计
- **三栏式布局**:
  - **左侧栏**: 文件上传与文件列表区。
  - **中间主区域**: 图像显示与交互区（画布）。这是用户的核心操作区域。
  - **右侧栏**: 分析结果展示区。显示细胞总数、ROI详细数据等。

### 4.2 交互流程
1. **上传**: 用户访问应用，首先看到的是一个清晰的上传区域。
2. **选择与加载**: 用户上传或从列表中选择一张图片后，图片加载到中间的画布上。
3. **自动分析**: 用户点击“分析”按钮，系统处理后，在画布的图像上叠加显示识别结果，同时在右侧栏更新细胞总数。
4. **手动ROI分析**: 用户选择ROI工具，在画布上绘制区域。绘制完成后，右侧栏自动更新该ROI的分析结果。
5. **导出**: 用户点击“导出”按钮，选择所需格式，下载结果。

### 4.3 视觉风格
- **专业与简洁**: 界面应采用简洁、干净的设计风格，避免不必要的装饰。使用中性色调（如灰色、白色、深蓝色），让用户的注意力集中在图像和数据上。
- **清晰的可视化**: 识别标记和ROI的颜色应醒目且可自定义，确保在不同背景的荧光图像上都清晰可见。
- **响应式设计**: 确保应用在主流的桌面浏览器分辨率下都能良好显示和操作。

---
**请根据以上详细需求，为我生成一份专业的软件需求文档（SRD），并设计一套低保真线框图（Wireframes）来直观展示应用的布局和核心交互流程。**